let palettes=[["#22223b","white"],["white","#22223b"],["#22223b","#FFD700"],["#b56576","#22223b"],["#f9e488","#22223b"]];function setup(){createCanvas(400,550),randomSeed(seed),noiseSeed(seed),colorMode(HSL,360,100,100,100),noLoop(),pixelDensity(5),treecount=150,cloudnum=random([75,150,75,75,35,75,75,75,75,200])}const tick=()=>new Promise((e=>requestAnimationFrame(e)));async function draw(){const e=createDiv("Renderingâ€¦");e.style("position","fixed"),e.style("left","50%"),e.style("top","50%"),e.style("transform","translateX(-50%) translateY(-50%)"),e.style("padding","0.25rem 0.5rem"),e.style("font-style","italic"),darkmode=random([1,1,2,2,2,2,3,3,4,4]),backmix=random([3,4]),1==darkmode?(background(palettes[0][0]),e.style("backgroundColor",palettes[0][0]),e.style("color",palettes[0][1])):2==darkmode?(background(palettes[1][0]),e.style("backgroundColor",palettes[1][0]),e.style("color",palettes[1][1])):3==darkmode?(background(palettes[0][0]),e.style("backgroundColor",palettes[0][0]),e.style("color",palettes[0][1])):4==darkmode&&(background(palettes[backmix][0]),e.style("backgroundColor",palettes[backmix][0]),e.style("color",palettes[backmix][1])),texture=random([1,1,1,1,1,1,1,1,1,1,2]),sun=random([1,2,3]),2==sun&&(push(),x=random(25,width-25),y=random(25,200),moonsize=random([10,20,40,10,20]),moonwarp=random([4,5,6,8]),translate(x,y),noStroke(),1==darkmode?fill(palettes[0][1]):2==darkmode?fill(palettes[1][1]):3==darkmode?fill(palettes[0][1]):4==darkmode&&fill(palettes[backmix][1]),circle(0,0,moonsize),1==darkmode?fill(palettes[0][0]):2==darkmode?fill(palettes[1][0]):3==darkmode?fill(palettes[0][0]):4==darkmode&&fill(palettes[backmix][0]),circle(moonsize/moonwarp,-moonsize/moonwarp,moonsize),await tick(),pop()),push(),1==darkmode?stroke(palettes[0][1]):2==darkmode?stroke(palettes[1][1]):3==darkmode?stroke(palettes[0][1]):4==darkmode&&stroke(palettes[backmix][1]),rectMode(CENTER);let t=random([100,100,100,50,150,100]),r=random([1,2,3,4,5,10,1,2]),o=random([2,3,4,5,r,r]);if(weightofhatchmarks=1,hatchstyle=random(["ybased","noisebased"]),linetype=random(["diagonalhatch","verticalhatch","horiz","diagonalhatch","diagonalhatch"]),foregroundtype=t<75?2:random([1,2,2,2,2]),1==foregroundtype){push(),morelines=15,xfreqofpeak=5,incr=random([.008,.002]),peakheight=200,groundwave=400,randangle=random(100),numhills=25,distbtwnhills=1;let e=5;for(;e--;)for(1==darkmode?fill(palettes[0][0]):2==darkmode?fill(palettes[1][0]):3==darkmode?fill(palettes[0][0]):4==darkmode&&fill(palettes[backmix][0]),noFill(),ground=t<5?600+random(-1,1):425+random(-1,1),b=ground;b<ground+500;b+=.5){for(b<ground+1?1==darkmode?stroke(palettes[0][1]):2==darkmode?stroke(palettes[1][1]):3==darkmode?stroke(palettes[0][1]):4==darkmode&&stroke(palettes[backmix][1]):1==darkmode?stroke(palettes[0][0]):2==darkmode?stroke(palettes[1][0]):3==darkmode?stroke(palettes[0][0]):4==darkmode&&stroke(palettes[backmix][0]),beginShape(),a=t;a<width-t;a+=xfreqofpeak)heightofhash=random(random(5,20)),n=noise(a*incr,ground),curveVertex(a,map(n,0,1,b-peakheight,b+peakheight)),b<ground+1&&a>t+1&&a<width-t-15&&random(0,1)>.3&&(push(),strokeWeight(.5),treeheight=random(5,random(5,random(5,random(5,75)))),translate(a,map(n,0,1,b-peakheight,b+peakheight)-treeheight-treeheight/3),drawTree(35),await tick(),pop());endShape()}await tick(),pop()}if(2==texture?metahatchtype=random([1,1,1,1,1,2,3]):metahatchtype=random([1,1,1,1,1,2,3,4]),1==metahatchtype){dashsetone=random([5,5,5,5,5,5,5,55]),colorfullines=random([1,2,2,2,2,2,2,2]);for(let e=t;e<=width-t;e+=r)for(let a=t;a<=height-t;a+=o){let o=.008;n=noise(e*o,a*o);let i=.004;n2=noise(e*i,a*i);let d=.008;n3=noise(e*d,a*d),"ybased"==hatchstyle?strokeWeight(map(a,t,height-t,weightofhatchmarks,0)):"noisebased"==hatchstyle&&strokeWeight(map(n3,0,1,weightofhatchmarks,0)),drawingContext.setLineDash([random(5),random(dashsetone)]),1==colorfullines&&stroke(50,55,random([0,55,0,0,0,0,0,0,0,0])),"verticalhatch"==linetype?(anglex=0,extralinex=0,extraline=random(-15,15),angley=anglex):"diagonalhatch"==linetype?(anglex=random(r/4,4*r),extralinex=random(-15,15),extraline=extralinex,angley=anglex):"horiz"==linetype&&(anglex=random(r/4,4*r),extralinex=random(-15,15),extraline=0,angley=0),n>.6||line(e,a,e+anglex+extralinex,a-angley-extraline),n2>.4||line(e,a,e+anglex+extralinex,a+angley+extraline)}}else if(2==metahatchtype){dashedlines=random([0,0,5,25]),dashedlinesmessy=random([5,55]),r=random([25,25,25,25,150]),o=5,incr=random([.001,.003,.008,.001,.003]);for(let e=t;e<=height-t;e+=o){beginShape(),noFill();for(let a=t-25;a<=width-t+25;a+=r)drawingContext.setLineDash([random(dashedlinesmessy),random(dashedlines)]),n=noise(a*incr,e*incr),strokeWeight(map(n,0,1,1,0)),curveVertex(a,e+map(n,0,1,-50,50));endShape()}r=5,o=25;for(let e=t;e<=width-t;e+=r){beginShape(),noFill();for(let a=t;a<=height-t+25;a+=o)drawingContext.setLineDash([random(dashedlinesmessy),random(dashedlines)]),n=noise(e*incr,a*incr),strokeWeight(map(n,0,1,1,0)),curveVertex(e+map(n,0,1,-50,50),a);endShape()}}else if(3==metahatchtype){let e=random([.5,4,.5,.5,.5,.5]);spacbtwnrow1=random([10,25,10]),spacbtwnrow2=random([10,25,10]),noisewiggle=5;let a=random([.1,.01,.01,.01,.008,.01]);for(let r=t;r<=width-t;r+=e)for(let o=t;o<=height-t;o+=e*spacbtwnrow1)n=noise(r*a,o*a),n>.4&&point(r,o+map(n,0,1,-noisewiggle,noisewiggle)),n>.6&&(fill("black"),rect(r,o+map(n,0,1,-noisewiggle,noisewiggle),4,map(n,0,1,0,3)));for(let r=t;r<=width-t;r+=e*spacbtwnrow2)for(let o=t;o<=height-t;o+=e)n=noise(r*a,o*a),n,point(r+map(n,0,1,-noisewiggle,noisewiggle),o)}else if(4==metahatchtype){push(),incr=.003,wiggle=10,xfreq=1,weightset=2,weightsetstart=random([-1,1]),fill(random(200,220),55,random([25,55,75]),55),stroke("black"),beginShape();for(let e=width-t;e>=t;e-=xfreq)n=noise(e*incr,t),strokeWeight(map(n,0,1,weightsetstart,weightset)),curveVertex(e,t+map(n,0,1,-wiggle,wiggle));for(let e=t;e<=height-t;e+=xfreq)n=noise(t,e*incr),strokeWeight(map(n,0,1,weightsetstart,weightset)),curveVertex(t+map(n,0,1,-wiggle,wiggle),e);for(let e=t;e<=width-t;e+=xfreq)n=noise(e*incr,height-t),strokeWeight(map(n,0,1,weightsetstart,weightset)),curveVertex(e,height-t+map(n,0,1,-wiggle,wiggle));for(let e=height-t;e>=t;e-=xfreq)n=noise(width-t,e*incr),strokeWeight(map(n,0,1,weightsetstart,weightset)),curveVertex(width-t+map(n,0,1,-wiggle,wiggle),e);endShape(CLOSE),await tick(),pop()}if(await tick(),pop(),1==sun){for(1==darkmode?stroke(palettes[0][1]):2==darkmode?stroke(palettes[1][1]):3==darkmode?stroke(palettes[0][1]):4==darkmode&&stroke(palettes[backmix][1]),push(),x=random(25,width-25),y=random(25,200),sunsize=random([10,20,40,60]),translate(x,y),push(),fill(random(["white","black"])),circle(0,0,15),await tick(),pop(),centerset=random(5,10),a=0;a<360;a+=6)push(),sizeofcenter=random(centerset,centerset+2),rotate(map(a,0,360,0,360)),line(0,sizeofcenter,0,random(sizeofcenter,sizeofcenter+sunsize)),await tick(),pop();await tick(),pop()}if(2==foregroundtype){for(push(),1==darkmode?stroke(palettes[0][1]):2==darkmode?stroke(palettes[1][1]):3==darkmode?stroke(palettes[0][1]):4==darkmode&&stroke(palettes[backmix][1]),b=0;b<20;b+=2)strokeWeight(map(b,0,15,1.5,-1)),line(t,height-t+b-3,width-t,height-t+b-3);await tick(),pop();let e=treecount;for(;e--;){1==darkmode?stroke(palettes[0][1]):2==darkmode?stroke(palettes[1][1]):3==darkmode?stroke(palettes[0][1]):4==darkmode&&stroke(palettes[backmix][1]),push(),x=random(t,width-t-10),treeheight=random(5,random(5,random(5,random(5,75)))),y=height-t-treeheight-treeheight/3+random(-2,7);let e=.003;n=noise(x*e,y*e),push(),strokeWeight(.5),translate(x,y),drawTree(treeheight),await tick(),pop()}}phosph=random([1,1,1,1,1,1,1,2]),innercloudtexture=random([1,1.6]),spacingset=random([1,1,1,1,1,1,2.1,.5,1,.5]),size=spacingset,mixedcloudtype=random([1,2,2,2,2,2,2,2,2,2]),2==darkmode||4==darkmode?blueclouds=random([1,1,2,2,2,2,2,2]):blueclouds=2,bluecloudcoset=random([1,50,220,220]),morphinside=random([1,2,2,2,2,2]),widthsetup=random([50,75,100,125,50]);let i=cloudnum;for(;i--;){push(),zzx=random(-widthsetup,widthsetup),zzy=random(-225,0),translate(zzx,zzy),1==mixedcloudtype&&(spacingset=random([1,.5,2.1,4]),size=spacingset),framey=random(200,300),cloudwidth=random(random(150,400),800),framemorphl=random(.1,4),framemorphr=random(.1,4),wiggleset=random(15,25),1==phosph?(frameyset1=framey,frameyset2=height-framey,phosphmod=2):(frameyset1=height-framey,frameyset2=framey,phosphmod=4),bluecloudcoset=random([1,50,220,220]);for(let e=0;e<=2;e++)for(let t=framey;t<=height-framey;t+=spacingset){1==morphinside&&(framemorphl=random(.1,4),framemorphr=random(.1,4)),framexl=map(t,framey,height-framey,cloudwidth,cloudwidth/framemorphl),framexr=map(t,framey,height-framey,cloudwidth,cloudwidth/framemorphr);for(let a=framexl;a<=width-framexr;a+=spacingset){let r=.1,o=.2;0==e?(strokeWeight(random(0,3)),1==darkmode?stroke(palettes[0][1]):2==darkmode?stroke(palettes[1][1]):3==darkmode?stroke(random(["white","white",palettes[2][1]])):4==darkmode&&stroke(palettes[backmix][1])):1==e&&noStroke(),n=noise(a*r,t*r),n2=noise(a*o,t*o),n3=noise(a*o,t*o),1==blueclouds?fill(bluecloudcoset,55,map(t,framey,height-framey,99,55)):1==darkmode?fill(palettes[0][0]):2==darkmode?fill(palettes[1][0]):3==darkmode?fill(palettes[0][0]):4==darkmode&&fill(palettes[backmix][0]),wigglex=map(n,0,1,-wiggleset,wiggleset),wiggley=map(t,frameyset1,frameyset2,map(n2,0,1,-wiggleset*phosphmod,wiggleset*phosphmod),map(n2,0,1,-5,5)),wigglesize=map(n2,0,1,1,3),size=map(n3,0,1,spacingset/5,spacingset*innercloudtexture),push(),translate(a,t),2==spacingset?rect(wigglex,wiggley,size*wigglesize):circle(wigglex,wiggley,size*wigglesize),pop()}}await tick(),pop()}if(1==texture){padfactor=1e3;let e=2e4;for(;e--;)x=random(width),y=random(height),push(),strokeWeight(.2),stroke(50,50,random(55,95),random(1,15)),noFill(),bezier(random(-padfactor,width+padfactor),random(-padfactor,height+padfactor),random(-padfactor,width+padfactor),random(-padfactor,height+padfactor),random(-padfactor,width+padfactor),random(-padfactor,height+padfactor),random(-padfactor,width+padfactor),random(-padfactor,height+padfactor)),pop()}e.remove()}function drawTree(e){treewidth=e/3,treeshade=2,treeshadewidth=treewidth/3.5,trunkheight=e/3,fill("white"),line(treewidth/2,0,treewidth/2,e),push();for(var t=0;t<=e-1;t+=treeshade)drawingContext.setLineDash([random(5),random(3)]),wigglez=0,wiggley=0,line(treewidth/2,-t+e-2,-treeshadewidth+wigglez+treewidth/2,-t+e+wiggley);for(var a=0;a<=e-1;a+=treeshade)drawingContext.setLineDash([random(5),random(3)]),wigglez=0,wiggley=0,line(treewidth/2,-a+e-2,treeshadewidth+wigglez+treewidth/2,-a+e+wiggley);pop(),line(treewidth/2,e,treewidth/2,e+trunkheight)}